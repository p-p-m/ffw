{% extends 'base.html' %}

{% load static i18n %}
{% get_media_prefix as MEDIA_PREFIX %}
{% get_static_prefix as STATIC_PREFIX %}

{% block content %}
<!-- view-title-box -->
<div class="view-title-box with-filters">
    <div class="wrap">
        <h1 class="view-title">{{ selected_subcategory.name }}</h1>
        <div class="filter-line">
            <ul class="filters">
                <li class="price">{% trans 'Price' %}:</li>
                <li><span class="filter-button gray freewidth no-check price-tag" data-role="filter-item" data-sort="PD"><i class="fa fa-chevron-up"></i></span></li>
                <li><span class="filter-button gray freewidth no-check price-tag" data-role="filter-item" data-sort="PA"><i class="fa fa-chevron-down"></i></span></li>
                <li class="rating">{% trans 'Rating' %}:</li>
                <li><span class="filter-button gray freewidth no-check price-tag" data-role="filter-item" data-sort="RD"><i class="fa fa-chevron-up"></i></span></li>
                <li class="show-filters">
                    <span class="filter-button gray freewidth filters-trigger" data-role="filters-trigger">фильтры</span>
                </li>
                <li>
                    <span class="filter-button" data-role="products-view-trigger" data-view="grid">
                        <span class="filter show-grid active"></span>
                    </span>
                </li>
                <li>
                    <span class="filter-button" data-role="products-view-trigger" data-view="list">
                        <span class="filter show-list"></span>
                    </span>
                </li>
            </ul>
        </div>
        <div class="show-products-count">
            {% trans 'products found' %} <span data-role="count">{{ total_count }}</span>
        </div>
    </div>
</div>
<!-- /view-title-box -->

<!-- basic filters -->
<div class="filter-block" data-role="filters-block" style="display: block !important;">
    <div class="wrap">
        <div class="filters">
            <div class="basic-filters">
                <h3 class="filter-title">Основные фильтры</h3>
                <div class="first-container">
                    <ul class="main-filters">
                        <li>
                            <span class="item" data-role="filter-item-toggle">новинка</span>
                        </li>
                        <li>
                            <span class="item" data-role="filter-item-toggle">акция</span>
                        </li>
                        <li>
                            <span class="item" data-role="filter-item-toggle">скидка</span>
                        </li>
                    </ul>
                </div>
                <div class="second-container">
                    <div id="price" data-role="filter-slider" min="0" max="100" initial-min="10" initial-max="50"></div>
                    <div class="values-fields">
                        <div class="values-item">
                            <input type="text">
                            <span class="currency">грн</span>
                        </div>
                        <div class="values-item">
                            <span>–</span>
                        </div>
                        <div class="values-item">
                            <input type="text">
                            <span class="currency">грн</span>
                        </div>
                    </div>
                </div>
            </div>
            {% for group in filter_form.fields_groups %}
            <div class="producer">
                <h3 class="filter-title">{{ group.name }}</h3>
                {% if group.type == 'numeric' %}
                    <div data-role="filter-slider" min="{{ group.fields.0.field.min_value }}" max="{{ group.fields.0.field.max_value }}"></div>
                {% else %}
                <ul class="main-filters">
                    {% for field in group.fields %}
                    <li><span class="item" data-role="filter-item" name="{{ field.name }}">{{ field.label }}</span></li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- /basic filters -->

<div class="products-view">
    <!-- products-list-box -->
    <div class="products-list-box" data-role="products-view" data-view="grid">
        <div class="wrap">
            <ul class="products-list">
                {% with products as items %}
                    {% for item in items %}
                        {% include 'items/product-grid.html' %}
                    {% endfor %}
                {% endwith %}
            </ul>
        </div>
    </div>
    <!-- /products-list-box -->

    <!-- products-list-box -->
    <div class="products-list-box" data-role="products-view" data-view="list">
        <div class="wrap">
            <ul class="products-list">
                {% with products as items %}
                    {% for item in items %}
                        {% include 'items/product-list.html' %}
                    {% endfor %}
                {% endwith %}
            </ul>
        </div>
    </div>
    <!-- /products-list-box -->
</div>
{% include 'partials/pagination.html' %}
{% endblock content %}

{% block js %}
<script src="{{ STATIC_URL }}/jsdev/product-list.js"></script>
{% endblock js %}
