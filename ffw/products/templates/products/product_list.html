{% extends 'base.html' %}

{% csrf_token %}
{% load i18n %}
{% load static %}
{% get_media_prefix as MEDIA_PREFIX %}
{% get_static_prefix as STATIC_PREFIX %}


{% block content %}
  {% include 'products/header.html' %}

  Paginate By:
    <select id='paginate-by'>
      <option value="10" {% if paginate_by == 10 %} selected="selected" {% endif %}>10</option>
      <option value="25" {% if paginate_by == 20 %} selected="selected" {% endif %}>20</option>
      <option value="50" {% if paginate_by == 30 %} selected="selected" {% endif %}>30</option>
    </select><br/>

 Order By:
      {% for field in sort_form %}
        {{ field }}
      {% endfor %}
    <br/>

  Selected category: {{ selected_category }}<hr/>
  <ul>
    {% for product in products %}
      <li>
        <a href="{{ product.get_url }}">{{ product.name }} | {{ product.code }}</a>
        (Price: {{ product.price_uah }} UAH, Rating: {{ product.rating }})
        <button  name= 'but1' value= {{product.code}} type="button" 
            id= "product_add" data-product-code= {{product.code}} }  > {% trans "Add to the cart" %}  </button>
      </li>
    {% endfor %}
  </ul>

  <hr/>
  <strong>Search form</strong><br/><br/>

  Filtered products: <div id='search-count'> {{ total_count }} </div>

  <form id='search-form' action='' method='GET'>
    <input type='submit'><br/>
    {% for group in filter_form.fields_groups %}
      {% if group.type == 'numeric' %}
        <strong> {{ group.name }}</strong><br/>
        From: {{ group.fields.0 }}, To: {{ group.fields.1 }}
        <hr/>
      {% else %}
        <strong> {{ group.name }}</strong><br/>
        {% for field in group.fields %}
          {{ field }} <a href='javascript:void(0);'> {{ field.label }} </a> <br>
        {% endfor %}
        <hr/>
      {% endif %}
    {% endfor %}

    <input type='submit'>
  </form>

{% endblock content %}

{% block js %}
  <script src="{{ STATIC_URL }}js/sess_cart.js"> </script>
  <script src="{{ STATIC_URL }}js/product-list.js"> </script>
{% endblock js %}
